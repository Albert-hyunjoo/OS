# 고등 운영체제 및 인터럽트 

한 개의 CPU와 프로세서를 기반으로 하는 Time-sharing System 외에도,
*다중 프로세스* 및 *메모리*를 통해 **속도, 효율성, 비용적 측면**에서 이점을 가져갈 수 있는
다양한 방법이 존재한다.

## 다양한 형태의 고등운영체제

### 다중프로세서 (Multi-Processor) 

* 다중 프로세서는 **하나의 메모리에 여러 개의 CPU**를 연결하는 것으로,
이를 통해서  **3가지 이점**을 가져갈 수 있다.
#### __퍼포먼스__
- 계산을 담당하는 CPU가 여러 개이다.
- 그만큼 계산을 분산해서 속도를 높일 수 있음
#### __비용 (COST)__
- 통상적으로 기능과 가격은 비례하지 않음
- 여러 개의 저기능 cpu이 하나의 고기능 cpu에 비해 효율적
#### __신뢰성 (Reliability)__
- CPU가 분산되어 있으므로, 하나가 고장나도 나머지가 정상 작동
    
* 단, 다중 프로세서는 기존의 TSS와 다른 **MULTIPROCESSOR OS**를 따로 사용하여야 한다.

### 분산 시스템 (Distributed System) 
* 여러 개의 컴퓨터 (CPU+Processor)를 LAN (근거리 통신) 으로 연결
* 기존의 다중 프로세서의 장점인 퍼포먼스, 비용, 신뢰성을 가져갈 수 있음
* 이 또한 Distributed OS를 별도로 사용해여 한다.

### 실시간 시스템 (Realtime System : RTOS)
* **시간제한**을 정해서 컴퓨터의 계산을 그 시간까지 끝마칠 수 있게 만드는 시스템
* 주로 FA, 즉 군사, 항공, 우주 등 실시간 계산이 필요한 분야에서 사용
* 이 시스템은 기존의 분산 시스템의 장점 (퍼포먼스, 계산, 비용)을 노리지는 않음

## 인터럽트 기반 시스템 (Interrupt-Based System)

### 인터럽트 (Interrupt)

인터럽트는 마이크로프로세서(CPU)가 프로그램을 실행하고 있을 때, 입출력 하드웨어 등의 장치에 예외상황이 발생하여 
처리가 필요할 경우에 마이크로프로세서에게 알려 처리할 수 있도록 하는 것을 말한다.

### 인터럽트의 종류

다양한 소스 (하드웨어, 소프트웨어, 내부) 에서 인터럽트가 발생한다면, CPU는 하던 작업을 일단 멈춘다음 interrupt가 발생된 뒤의 코드를 OS에서 LOAD해서 작업을 수행한다. 
작업이 완료된 후에는 다시 OS 및 원래 작업하던 파일로 되돌아가고, OS는 대기 상태에 들어간다.

#### _하드웨어 인터럽트 (Hardware Interrupt)_

* 키보드나 마우스 같은 **입출력 장치**에서 발생하는 전기 신호를 처리하고자 할 때 발생
* 다른 하드웨어 장치가 CPU에게 신호를 전달하거나 서비스를 요청하는 경우

#### _소프트웨어 인터럽트 (Software Interrupt)_

* **소프트웨어 내부**에서 발생시키는 인터럽트 형태 (예외 사항)
* CPU 내의 **인터럽트 라인을 세팅**해서 인터럽트를 발생시키는 경우이다.
* CPU는 명령을 수행하기 전에 인터럽트 라인이 세팅이 되어 있는지를 발생한다.

### 인터럽트가 실행되는 과정

_ex) A라는 프로세스를 실행하는 과정에서 데이터를 읽어오는 경우에는?_

1) A 프로세스는 SYSTEM CALL로 인터럽트를 발생
2) CPU는 현재까지 하던 기계어 코드를 완료하고
3) 수행중이었던 상태를 PROCESS의 PCB (Process Control Block) 저장
4) 인터럽트 벡터를 읽고 ISR 주소값을 얻어 ISR(Interrupt Service Routine)로 점프하여 루틴을 실행한다. 
5) 해당 코드를 실행한다. 
6) 해당 일을 다 처리하면, 대피시킨 레지스터를 복원한다. 
7) ISR의 끝에 IRET 명령어에 의해 인터럽트가 해제 된다. 
8) IRET 명령어가 실행되면, 대피시킨 PC 값을 복원하여 이전 실행 위치로 복원한다.


